> 이 책에서는 개발 능력을 떨어뜨리고 소프트웨어의 성장을 방해하는 설계/구현상의 문제를 **악마**에 비유합니다.

<br>

## 1장 잘못된 구조의 문제 깨닫기

좋은 구조로 개선하기 위해서는 일단 나쁜 구조의 폐해를 인지 해야합니다.

|기술 중심 명명|일렬번호 명명|
|---|---|
|![image](https://github.com/hye-ung97/record-books/assets/117243197/a9d65f14-393f-4f94-a0c6-64f5edc01058)|![image](https://github.com/hye-ung97/record-books/assets/117243197/ee5d3e9c-9819-4e2c-a658-dc305d019c0e)|
|기술을 기반으로 이름 붙이는 것|class와 method에 번호를 붙여서 이름 짓는 것|

→ 이렇게 기술 기반으로 이름을 짓거나, 일렬번호를 매겨 이름을 지으면 코드에서 어떠한 의도도 읽어 낼 수 없습니다.

→ 따라서 의도와 목적을 드러내는 이름을 사용하는 것이 좋습니다.

### 중첩된 로직
![image](https://github.com/hye-ung97/record-books/assets/117243197/d4e0c67f-b20c-4ac4-93bc-b2764e7da883)

중첩이 많을 수록 코드의 가독성이 나빠집니다. 이해하기 힘들면 디버깅과 기능 변경에 더 오랜 시간이 걸립니다.

게다가 분기 로직을 정화하게 이해하지 못하고 기능을 변경하면, 버그가 발생할 수도 있습니다.

> 데이터와 로직 등이 분산되어 있는 것을 응집도가 낮은 구조라고 합니다.

### 응집도가 낮아 생길 수 있는 문제점

1. 코드 중복
2. 수정 누락
3. 가독성 저하
4. 초기화되지 않은 상태
   - 초기화하지 않으면 쓸모 없는 클래스 혹은 초기화하지 않은 상태가 발생할 수 잇는 클래스를 안티패턴 쓰레기 객체라고 부릅니다.
5. 잘못된 값 할당


## 2장 설계 첫걸음
 
자주 바뀔 가능성이 있는 코드를 구현할 때는 변수 이름을 쉽게 붙이는 것도 아주 훌륭한 기본 설계가 될 수 있습니다.      
         
변수에 값을 다시 할당하는 것을 **재할당**이라고 합니다. 재할당은 변수의 용도가 바뀌는 문제를 일으키기 쉽습니다. 그러면 코드를 읽는 사람을 혼란스럽게 만들고 버그를 만들어 낼 가능성이 있습니다.

> 유지 보수와 변경이 쉽도록 변수의 이름과 로직을 신경 써서 작성하는 것이 곧 설계입니다.

## 3장 클래스 설계: 모든 것과 연결되는 설계 기반

유지 보수와 변경이 쉬운 코드를 작성하려면, 관심사 분리가 중요합니다.

![image](https://github.com/hye-ung97/record-books/assets/117243197/f50099bb-eb00-49c3-a8d4-af0639c37362)

잘 만들어진 클래스는 **인스턴스 변수** / 인스턴스 변수에 잘못된 값이 할당되지 않게 막고, **정상적으로 조작하는 메서드**로 구성됩니다.
         
다른 클래스를 사용해서 초기화와 유효성 검사를 해야 하는 클래스는 그 자체로는 안전하게 사용할 수 없는 미성숙한 클래스입니다. → 데이터 클래스

> 자신의 몸은 자신이 지켜야 합니다!!

로우 데이터 객체를 방지 하려면, 클래스 인스턴스를 생성하는 시점에 확실하게 인스턴스 변수가 정상적인 값을 갖게 만들면 됩니다. 즉 적절한 초기화 로직을 생성자에 구현하면 됩니다.

<br>

### 가드

![image](https://github.com/hye-ung97/record-books/assets/117243197/92b54828-37a1-4f7d-84f8-49a7f2cfb38c)

처리 범위를 벗어나는 조건을 메서드 가장 앞 부분에서 확인하는 코드를 가드라고 부릅니다.

가드를 활용하면 불필요한 요소를 메서드 앞부분에서 제외할 수 있으므로 이어지는 로직이 간단 해집니다.

생성자에 가드를 배치해 두면 **잘못된 값을 가진 인스턴스는 존재할 수 없으며**, 항상 안전하고 **정상적인 인스턴스만 존재**하게 된다는 장점이 있습니다.

### 불변 변수

![image](https://github.com/hye-ung97/record-books/assets/117243197/b864fbad-6f78-4f97-aad5-878083b61dc4)

불변 변수로 만들어서 예상하지 못한 동작 막기 → 인스턴스 변수에 final 수식자를 붙이면, 한번만 할당할 수 있으며 이렇게 하면 인스턴스 변수에 잘못된 값을 직접 할당 할 수 없습니다. 생성자 가드를 함께 사용하면 더 안전한 구조가 될 것입니다.

![image](https://github.com/hye-ung97/record-books/assets/117243197/e7f437ef-c1eb-4669-adee-b7978cdeaa01)

변경하고싶다면, 새로운 인스턴스 만들기 → 인스턴스 변수의 내용을 변경하는 것이 아니라, 변경된 값을 가진 새로운 인스턴스를 만들어서 사용하면 됩니다.

![image](https://github.com/hye-ung97/record-books/assets/117243197/85750cb2-9985-4a38-9d5e-3547dcc83f6b)

엉뚱한 값을 전달하지 않도록 하기 → 매개변수의 자료형을 int 에서 Money 로 변경하면 Money 이외의 자료형을 전달할 수 없습니다.

 

클래스 설계란 인스턴스 변수가 잘못된 상태에 빠지지 않게 하기 위한 구조를 만드는 것이다. 

데이터와 그 데이터를 조작하는 로직을 하나의 클래스로 묶고, 필요한 절차(메서드)만 외부에 공개하는 것을 캡슐화라고 합니다.

<br>

> 완전 생성자 : 잘못된 상태로부터 클래스를 보호하기 위한 디자인 패턴
>
> 값 객체 : 값을 클래스로 나타내는 디자인 패턴



