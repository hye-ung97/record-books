## 14장 리팩터링: 기존의 코드를 성장시키는 기술

> **리팩터링이란?**
> 실질적인 동작은 유지하면서, 구조만 정리하는 작업

### 리팩터링의 흐름

리팩터링을 하기 위해 코드를 변경할 때 실질적인 동작까지 바뀌어 버린다면, 이는 리팩터링이라 할 수 없습니다.

 1. 중첩을 제거하여 보기 좋게 만들기
 2. 의미 단위로 로직 정리하기
 3. 조건을 읽기 쉽게 하기
 4. 무턱대고 작성한 로직을 목적을 나타내는 메서드로 바꾸기

### 단위 테스트로 리팩터링 중 실수 방지하기

> 리팩터링을 할 때 단위 테스트는 필수다!

테스트 코드를 사용한 리팩터링 흐름

1. 이상적인 구조의 클래스 기본 형태를 어느 정도 잡습니다.
2. 이 기본 형태를 기반으로 테스트 코드를 작성합니다.
3. 테스트를 실패시킵니다.
4. 테스트를 성공시키기 위한 최소한의 코드를 작성합니다.
5. 기본 형태의 클래스 내부에서 리팩터링 대상 코드를 호출합니다.
6. 테스트가 성공할 수 있도록, 조금씩 로직을 이상적인 구조로 리팩터링합니다.

### 불확실한 사양을 이해하기 위한 분석 방법

1. 문서화 테스트
   - 문서화 테스트는 매서드의 사양을 분석하는 방법입니다.
   - 분석하고 싶은 메서드읭 테스트를 작성해서, 해당 메서드가 어떤 동작을 하는지 확인하는 방법
2. 스크래치 리팩터링
   - 로직의 의미와 구조를 분석하기 위해 시험 삼아 리팩터링하는 것
   - 코드의 가독성이 좋아져 로직의 사양을 이해할 수 있게 됩니다.
   - 이상적인 구조가 보입니다.
   - 쓸데없는 코드가 보입니다.
   - 테스트 코드를 어떻게 작성해야 할지 보입니다.
   - 스크래치 리팩터링은 어디까지나 분석용이므로, 리포지터리에 병합해서는 안됩니다.

### 리팩터링 시 주의 사항

1. 기능 추가와 리팩터링 동시에 하지 않기
2. 작은 단계로 실시하기
3. 불필요한 사양은 제거 고려하기


## 15장 설계의 의의와 설계를 대하는 방법


 
